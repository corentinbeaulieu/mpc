

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently Asked Questions &mdash; MPC 4.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a8addcb7"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Known issues" href="issues.html" />
    <link rel="prev" title="Examples" href="runtime/runtime_examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/mpc_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building &amp; Installing MPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Using MPC</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-install">Build &amp; Install</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rebuild-outside-of-installmpc-complete-run">Rebuild outside of <code class="docutils literal notranslate"><span class="pre">installmpc</span></code> complete run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-debug-mode-afterwards">Enabling “debug” mode afterwards</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#runtime">Runtime</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#debug-a-unix-process-in-a-external-terminal">Debug a UNIX process in a external terminal</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Known issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MPC-specific</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="features/privatization.html">Privatization</a></li>
<li class="toctree-l1"><a class="reference internal" href="features/launching_options.html">Advanced Launching Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute/main.html">Developer Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://mpc.hpcframework.com">Official Website (mpc.hpcframework.com)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/cea-hpc/mpc">Repository (github.com)</a></li>
<li class="toctree-l1"><a class="reference external" href="https://mpc.hpcframework.com/publications-2/">Publications (mpc.hpcframework.com)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MPC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Frequently Asked Questions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="build-install">
<h2>Build &amp; Install<a class="headerlink" href="#build-install" title="Link to this heading"></a></h2>
<section id="rebuild-outside-of-installmpc-complete-run">
<h3>Rebuild outside of <code class="docutils literal notranslate"><span class="pre">installmpc</span></code> complete run<a class="headerlink" href="#rebuild-outside-of-installmpc-complete-run" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">installmpc</span></code> is a script to build the whole MPC compilation chain, including
dependencies, to ensure consistency between software revisions. It supports
package extraction from different sources, loading package from Spack of even
from direct PATH references. Once updates of MPC sources have been made, one may
think re-run the complete process is time wasting. To ease the rebuilding
process, the <code class="docutils literal notranslate"><span class="pre">installmpc</span></code> script generates a <code class="docutils literal notranslate"><span class="pre">reconfigure</span></code> script, directly
located at the root of the build directory. This script may be reused to
reconfigure MPC again (e.g. with new <code class="docutils literal notranslate"><span class="pre">./configure</span></code> options). <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>
works as well.</p>
</section>
<section id="enabling-debug-mode-afterwards">
<h3>Enabling “debug” mode afterwards<a class="headerlink" href="#enabling-debug-mode-afterwards" title="Link to this heading"></a></h3>
<p>To enable debug mode within MPC (and some of its dependencies), the
<code class="docutils literal notranslate"><span class="pre">installmpc</span></code> provides a direct option: <code class="docutils literal notranslate"><span class="pre">--enable-debug</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This option enable debug mode for <em>autopriv</em>, <em>libfabric</em> &amp; MPC. Debug only implies debug symbols a specific options has been made to enable debug ‘messages’.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When privatisation is enabled (=default) a patched debugger is provided to make user-level threads available through GDB. To install it, please use the <code class="docutils literal notranslate"><span class="pre">--enable-gdb</span></code> option (experimental).</p>
</div>
<p>To avoid re-running the whole <code class="docutils literal notranslate"><span class="pre">installmpc</span></code> script, MPC provides a set of
options to be given to the <code class="docutils literal notranslate"><span class="pre">reconfigure</span></code> script:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--enable-debug</span></code>: debug symbols</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--enable-debug-messages</span></code>: debug messages</p></li>
</ul>
<p>Then, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">&amp;&amp;</span> <span class="pre">make</span> <span class="pre">install</span></code> to rebuild MPC in debug mode.</p>
</section>
</section>
<section id="runtime">
<h2>Runtime<a class="headerlink" href="#runtime" title="Link to this heading"></a></h2>
<section id="debug-a-unix-process-in-a-external-terminal">
<h3>Debug a UNIX process in a external terminal<a class="headerlink" href="#debug-a-unix-process-in-a-external-terminal" title="Link to this heading"></a></h3>
<p>You may prefix your application name (ex: <cite>./a.out</cite>) with terminal emulator
commands. Then, you may provide to the emulator, the GDB command to run. The
<cite>-ex ‘r’</cite> argument below lets gdb starts immediately without waiting for input:</p>
<blockquote>
<div><p>mpcrun -N=4 -n=4 -p=4 -c=1 xterm -e gdb -ex ‘r’ ./a.out</p>
</div></blockquote>
<p>or (example on Skylake)</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>ccc_mprun<span class="w"> </span>-N<span class="w"> </span><span class="m">1</span><span class="w"> </span>-n<span class="w"> </span><span class="m">1</span><span class="w"> </span>-c<span class="w"> </span><span class="m">24</span><span class="w"> </span>-x<span class="w"> </span>-p<span class="w"> </span>sklb<span class="w"> </span>-E<span class="w"> </span><span class="s2">&quot;--x11=all&quot;</span><span class="w"> </span>xterm<span class="w"> </span>-e<span class="w"> </span>gdb<span class="w"> </span>-ex<span class="w"> </span><span class="s1">&#39;r&#39;</span>
--args<span class="w"> </span>./a.out
</pre></div>
</div>
<p>It is even better to rely on GDB script. Such script contains multiple lines,
each of them being directly injected to GDB prompt. For instance, a script to
insert a breakpoint each time <cite>sctk_malloc</cite> is called would look like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="w"> </span>pagination<span class="w"> </span>off<span class="w"> </span><span class="nb">set</span><span class="w"> </span>logging<span class="w"> </span>file<span class="w"> </span>file.out<span class="w"> </span><span class="nb">set</span><span class="w"> </span>logging<span class="w"> </span>on<span class="w"> </span><span class="nb">set</span><span class="w"> </span>breakpoint
pending<span class="w"> </span>on<span class="w"> </span><span class="k">break</span><span class="w"> </span>sctk_malloc
<span class="w">        </span>bt<span class="w"> </span><span class="k">continue</span>
end<span class="w"> </span>run<span class="w"> </span><span class="nb">set</span><span class="w"> </span>logging<span class="w"> </span>off<span class="w"> </span>quit
</pre></div>
</div>
<p>Sometimes, it may be interesting to debug only a single process (without knowing
in advance which one). For instance, consider the situation where you want to
investigate each time a function call <cite>sctk_network_notify_idle_message()</cite>.
Putting a breakpoint seen by any process would be a nightmare. To circumvent
this, an MPC macro named <cite>GDB_BREAKPOINT()</cite> can be used to inject a livelock in
MPC codebase (you may use it to fit your needs). When GDB reaches this livelock,
it will have no other solution that to wait for your Ctrl+C. The output will
explain you how to remove the livelock and start a step-by-step debugging from
there. The advantage here is the control you have to set your breakpoint. You
may only set it for a subset of processes. Once the livelock occur, you may run
the debugger only for livelocked processes. To attach an existing process, use
<cite>gdb attach</cite> when logged onto the node.</p>
<p>But here is a better solution thanks to GDB server capabilities. Run your
program similarly to this :</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>mpcrun<span class="w"> </span>...<span class="w"> </span>gdbserver<span class="w"> </span>host:8080<span class="w"> </span>./a.out
</pre></div>
</div>
<p>Then, consider a script like this named <cite>gdb.sh</cite>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="w">     </span><span class="nv">nodename</span><span class="o">=</span><span class="s2">&quot;inti&quot;</span>
<span class="nv">nodeset</span><span class="o">=</span><span class="s2">&quot;1000 10001 10003 10004&quot;</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$nodeset</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">        </span>cat<span class="s">&lt;&lt;EOF &gt; R$i target remote $nodename$i:8080 continue EOF</span>
<span class="w">             </span>xterm<span class="w"> </span>-e<span class="w"> </span>gdb<span class="w"> </span>--command<span class="w"> </span>R<span class="nv">$i</span><span class="w"> </span><span class="p">&amp;</span>
<span class="w">     </span><span class="k">done</span>
</pre></div>
</div>
<p>It will start an XTerm session for each process, each running on a separate
compute node. You may then interact without SSH-ing. Another solution is also to
retrieve the incriminated process (and its hostname) and run the gdb command
directly from prompt, allowing you to debug one MPI process at a time!</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="runtime/runtime_examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="issues.html" class="btn btn-neutral float-right" title="Known issues" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, CEA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>